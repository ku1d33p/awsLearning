<!DOCTYPE html>
<!-- saved from url=(0053)https://aws.qwiklabs.com/classrooms/53328/labs/299515 -->
<html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<title>Architecting on AWS - Lab 6 - Implementing a Serverless Architecture with AWS Managed Services | Qwiklabs</title>
<script>
//<![CDATA[
window.gon={};gon.current_user={"firstname":"kuldeep","lastname":"yadav","fullname":"kuldeep yadav","company":"perfios","email":"kuldeep.yadav@perfios.com","origin":"aws, direct","subscriptions":0,"id":"c8397035b4f0e96855dcc615962e597a","qlCreatedAt":"2021-09-03 13:00:07 UTC","optIn":true,"current_organization_id":null,"current_organization_role":null};gon.segment=null;gon.deployment="aws";gon.content={"type":"Lab","id":10387,"name":"Architecting on AWS - Lab 6 - Implementing a Serverless Architecture with AWS Managed Services"};
//]]>
</script>
<script>
  dataLayer = [
    {user: gon.current_user},
    {content: gon.content}
  ];
</script>
<script src="./index_files/webcomponents-loader-60a166e60df2787cca5915e2ced8c317457f421a20f02601b937a72275ac441a.js"></script><script data-dapp-detection="">!function(){let e=!1;function n(){if(!e){const n=document.createElement("meta");n.name="dapp-detected",document.head.appendChild(n),e=!0}}if(window.hasOwnProperty("ethereum")){if(window.__disableDappDetectionInsertion=!0,void 0===window.ethereum)return;n()}else{var t=window.ethereum;Object.defineProperty(window,"ethereum",{configurable:!0,enumerable:!1,set:function(e){window.__disableDappDetectionInsertion||n(),t=e},get:function(){if(!window.__disableDappDetectionInsertion){const e=arguments.callee;e&&e.caller&&e.caller.toString&&-1!==e.caller.toString().indexOf("getOwnPropertyNames")||n()}return t}})}}();</script>
<script src="./index_files/vendor-2beee108ba05276bc429223ee82ed81449d233c93d45af5da84add895e101218.js"></script>
<script src="./index_files/application-debecc062c93b618026d5e878380e58c6c1ded911d812c33962b4cb76ee90c5b.js"></script>
<script src="./index_files/hallofmirrors-0e08a1c6509abcaa017fe5e69cbefcc0328045ec0c27641f9e16865f89130a78.js"></script>
<custom-style>
  <style is="custom-style">[hidden] {
  display: none !important;
}

</style>
</custom-style>
<custom-style>
  <style is="custom-style">html {
  --layout_-_display:  flex;;

      --layout-inline_-_display:  inline-flex;;

      --layout-horizontal_-_display:  var(--layout_-_display); --layout-horizontal_-_-ms-flex-direction:  row; --layout-horizontal_-_-webkit-flex-direction:  row; --layout-horizontal_-_flex-direction:  row;;

      --layout-horizontal-reverse_-_display:  var(--layout_-_display); --layout-horizontal-reverse_-_-ms-flex-direction:  row-reverse; --layout-horizontal-reverse_-_-webkit-flex-direction:  row-reverse; --layout-horizontal-reverse_-_flex-direction:  row-reverse;;

      --layout-vertical_-_display:  var(--layout_-_display); --layout-vertical_-_-ms-flex-direction:  column; --layout-vertical_-_-webkit-flex-direction:  column; --layout-vertical_-_flex-direction:  column;;

      --layout-vertical-reverse_-_display:  var(--layout_-_display); --layout-vertical-reverse_-_-ms-flex-direction:  column-reverse; --layout-vertical-reverse_-_-webkit-flex-direction:  column-reverse; --layout-vertical-reverse_-_flex-direction:  column-reverse;;

      --layout-wrap_-_-ms-flex-wrap:  wrap; --layout-wrap_-_-webkit-flex-wrap:  wrap; --layout-wrap_-_flex-wrap:  wrap;;

      --layout-wrap-reverse_-_-ms-flex-wrap:  wrap-reverse; --layout-wrap-reverse_-_-webkit-flex-wrap:  wrap-reverse; --layout-wrap-reverse_-_flex-wrap:  wrap-reverse;;

      --layout-flex-auto_-_-ms-flex:  1 1 auto; --layout-flex-auto_-_-webkit-flex:  1 1 auto; --layout-flex-auto_-_flex:  1 1 auto;;

      --layout-flex-none_-_-ms-flex:  none; --layout-flex-none_-_-webkit-flex:  none; --layout-flex-none_-_flex:  none;;

      --layout-flex_-_-ms-flex:  1 1 0.000000001px; --layout-flex_-_-webkit-flex:  1; --layout-flex_-_flex:  1; --layout-flex_-_-webkit-flex-basis:  0.000000001px; --layout-flex_-_flex-basis:  0.000000001px;;

      --layout-flex-2_-_-ms-flex:  2; --layout-flex-2_-_-webkit-flex:  2; --layout-flex-2_-_flex:  2;;

      --layout-flex-3_-_-ms-flex:  3; --layout-flex-3_-_-webkit-flex:  3; --layout-flex-3_-_flex:  3;;

      --layout-flex-4_-_-ms-flex:  4; --layout-flex-4_-_-webkit-flex:  4; --layout-flex-4_-_flex:  4;;

      --layout-flex-5_-_-ms-flex:  5; --layout-flex-5_-_-webkit-flex:  5; --layout-flex-5_-_flex:  5;;

      --layout-flex-6_-_-ms-flex:  6; --layout-flex-6_-_-webkit-flex:  6; --layout-flex-6_-_flex:  6;;

      --layout-flex-7_-_-ms-flex:  7; --layout-flex-7_-_-webkit-flex:  7; --layout-flex-7_-_flex:  7;;

      --layout-flex-8_-_-ms-flex:  8; --layout-flex-8_-_-webkit-flex:  8; --layout-flex-8_-_flex:  8;;

      --layout-flex-9_-_-ms-flex:  9; --layout-flex-9_-_-webkit-flex:  9; --layout-flex-9_-_flex:  9;;

      --layout-flex-10_-_-ms-flex:  10; --layout-flex-10_-_-webkit-flex:  10; --layout-flex-10_-_flex:  10;;

      --layout-flex-11_-_-ms-flex:  11; --layout-flex-11_-_-webkit-flex:  11; --layout-flex-11_-_flex:  11;;

      --layout-flex-12_-_-ms-flex:  12; --layout-flex-12_-_-webkit-flex:  12; --layout-flex-12_-_flex:  12;;

      

      --layout-start_-_-ms-flex-align:  start; --layout-start_-_-webkit-align-items:  flex-start; --layout-start_-_align-items:  flex-start;;

      --layout-center_-_-ms-flex-align:  center; --layout-center_-_-webkit-align-items:  center; --layout-center_-_align-items:  center;;

      --layout-end_-_-ms-flex-align:  end; --layout-end_-_-webkit-align-items:  flex-end; --layout-end_-_align-items:  flex-end;;

      --layout-baseline_-_-ms-flex-align:  baseline; --layout-baseline_-_-webkit-align-items:  baseline; --layout-baseline_-_align-items:  baseline;;

      

      --layout-start-justified_-_-ms-flex-pack:  start; --layout-start-justified_-_-webkit-justify-content:  flex-start; --layout-start-justified_-_justify-content:  flex-start;;

      --layout-center-justified_-_-ms-flex-pack:  center; --layout-center-justified_-_-webkit-justify-content:  center; --layout-center-justified_-_justify-content:  center;;

      --layout-end-justified_-_-ms-flex-pack:  end; --layout-end-justified_-_-webkit-justify-content:  flex-end; --layout-end-justified_-_justify-content:  flex-end;;

      --layout-around-justified_-_-ms-flex-pack:  distribute; --layout-around-justified_-_-webkit-justify-content:  space-around; --layout-around-justified_-_justify-content:  space-around;;

      --layout-justified_-_-ms-flex-pack:  justify; --layout-justified_-_-webkit-justify-content:  space-between; --layout-justified_-_justify-content:  space-between;;

      --layout-center-center_-_-ms-flex-align:  var(--layout-center_-_-ms-flex-align); --layout-center-center_-_-webkit-align-items:  var(--layout-center_-_-webkit-align-items); --layout-center-center_-_align-items:  var(--layout-center_-_align-items); --layout-center-center_-_-ms-flex-pack:  var(--layout-center-justified_-_-ms-flex-pack); --layout-center-center_-_-webkit-justify-content:  var(--layout-center-justified_-_-webkit-justify-content); --layout-center-center_-_justify-content:  var(--layout-center-justified_-_justify-content);;

      

      --layout-self-start_-_-ms-align-self:  flex-start; --layout-self-start_-_-webkit-align-self:  flex-start; --layout-self-start_-_align-self:  flex-start;;

      --layout-self-center_-_-ms-align-self:  center; --layout-self-center_-_-webkit-align-self:  center; --layout-self-center_-_align-self:  center;;

      --layout-self-end_-_-ms-align-self:  flex-end; --layout-self-end_-_-webkit-align-self:  flex-end; --layout-self-end_-_align-self:  flex-end;;

      --layout-self-stretch_-_-ms-align-self:  stretch; --layout-self-stretch_-_-webkit-align-self:  stretch; --layout-self-stretch_-_align-self:  stretch;;

      --layout-self-baseline_-_-ms-align-self:  baseline; --layout-self-baseline_-_-webkit-align-self:  baseline; --layout-self-baseline_-_align-self:  baseline;;

      

      --layout-start-aligned_-_-ms-flex-line-pack:  start; --layout-start-aligned_-_-ms-align-content:  flex-start; --layout-start-aligned_-_-webkit-align-content:  flex-start; --layout-start-aligned_-_align-content:  flex-start;;

      --layout-end-aligned_-_-ms-flex-line-pack:  end; --layout-end-aligned_-_-ms-align-content:  flex-end; --layout-end-aligned_-_-webkit-align-content:  flex-end; --layout-end-aligned_-_align-content:  flex-end;;

      --layout-center-aligned_-_-ms-flex-line-pack:  center; --layout-center-aligned_-_-ms-align-content:  center; --layout-center-aligned_-_-webkit-align-content:  center; --layout-center-aligned_-_align-content:  center;;

      --layout-between-aligned_-_-ms-flex-line-pack:  justify; --layout-between-aligned_-_-ms-align-content:  space-between; --layout-between-aligned_-_-webkit-align-content:  space-between; --layout-between-aligned_-_align-content:  space-between;;

      --layout-around-aligned_-_-ms-flex-line-pack:  distribute; --layout-around-aligned_-_-ms-align-content:  space-around; --layout-around-aligned_-_-webkit-align-content:  space-around; --layout-around-aligned_-_align-content:  space-around;;

      

      --layout-block_-_display:  block;;

      --layout-invisible_-_visibility:  hidden !important;;

      --layout-relative_-_position:  relative;;

      --layout-fit_-_position:  absolute; --layout-fit_-_top:  0; --layout-fit_-_right:  0; --layout-fit_-_bottom:  0; --layout-fit_-_left:  0;;

      --layout-scroll_-_-webkit-overflow-scrolling:  touch; --layout-scroll_-_overflow:  auto;;

      --layout-fullbleed_-_margin:  0; --layout-fullbleed_-_height:  100vh;;

      

      --layout-fixed-top_-_position:  fixed; --layout-fixed-top_-_top:  0; --layout-fixed-top_-_left:  0; --layout-fixed-top_-_right:  0;;

      --layout-fixed-right_-_position:  fixed; --layout-fixed-right_-_top:  0; --layout-fixed-right_-_right:  0; --layout-fixed-right_-_bottom:  0;;

      --layout-fixed-bottom_-_position:  fixed; --layout-fixed-bottom_-_right:  0; --layout-fixed-bottom_-_bottom:  0; --layout-fixed-bottom_-_left:  0;;

      --layout-fixed-left_-_position:  fixed; --layout-fixed-left_-_top:  0; --layout-fixed-left_-_bottom:  0; --layout-fixed-left_-_left:  0;;
}

</style>
</custom-style><style>[hidden] { display: none !important; }</style><custom-style>
  <style is="custom-style">html {
  --google-red-100: #f4c7c3;
      --google-red-300: #e67c73;
      --google-red-500: #db4437;
      --google-red-700: #c53929;

      --google-blue-100: #c6dafc;
      --google-blue-300: #7baaf7;
      --google-blue-500: #4285f4;
      --google-blue-700: #3367d6;

      --google-green-100: #b7e1cd;
      --google-green-300: #57bb8a;
      --google-green-500: #0f9d58;
      --google-green-700: #0b8043;

      --google-yellow-100: #fce8b2;
      --google-yellow-300: #f7cb4d;
      --google-yellow-500: #f4b400;
      --google-yellow-700: #f09300;

      --google-grey-100: #f5f5f5;
      --google-grey-300: #e0e0e0;
      --google-grey-500: #9e9e9e;
      --google-grey-700: #616161;

      

      --paper-red-50: #ffebee;
      --paper-red-100: #ffcdd2;
      --paper-red-200: #ef9a9a;
      --paper-red-300: #e57373;
      --paper-red-400: #ef5350;
      --paper-red-500: #f44336;
      --paper-red-600: #e53935;
      --paper-red-700: #d32f2f;
      --paper-red-800: #c62828;
      --paper-red-900: #b71c1c;
      --paper-red-a100: #ff8a80;
      --paper-red-a200: #ff5252;
      --paper-red-a400: #ff1744;
      --paper-red-a700: #d50000;

      --paper-pink-50: #fce4ec;
      --paper-pink-100: #f8bbd0;
      --paper-pink-200: #f48fb1;
      --paper-pink-300: #f06292;
      --paper-pink-400: #ec407a;
      --paper-pink-500: #e91e63;
      --paper-pink-600: #d81b60;
      --paper-pink-700: #c2185b;
      --paper-pink-800: #ad1457;
      --paper-pink-900: #880e4f;
      --paper-pink-a100: #ff80ab;
      --paper-pink-a200: #ff4081;
      --paper-pink-a400: #f50057;
      --paper-pink-a700: #c51162;

      --paper-purple-50: #f3e5f5;
      --paper-purple-100: #e1bee7;
      --paper-purple-200: #ce93d8;
      --paper-purple-300: #ba68c8;
      --paper-purple-400: #ab47bc;
      --paper-purple-500: #9c27b0;
      --paper-purple-600: #8e24aa;
      --paper-purple-700: #7b1fa2;
      --paper-purple-800: #6a1b9a;
      --paper-purple-900: #4a148c;
      --paper-purple-a100: #ea80fc;
      --paper-purple-a200: #e040fb;
      --paper-purple-a400: #d500f9;
      --paper-purple-a700: #aa00ff;

      --paper-deep-purple-50: #ede7f6;
      --paper-deep-purple-100: #d1c4e9;
      --paper-deep-purple-200: #b39ddb;
      --paper-deep-purple-300: #9575cd;
      --paper-deep-purple-400: #7e57c2;
      --paper-deep-purple-500: #673ab7;
      --paper-deep-purple-600: #5e35b1;
      --paper-deep-purple-700: #512da8;
      --paper-deep-purple-800: #4527a0;
      --paper-deep-purple-900: #311b92;
      --paper-deep-purple-a100: #b388ff;
      --paper-deep-purple-a200: #7c4dff;
      --paper-deep-purple-a400: #651fff;
      --paper-deep-purple-a700: #6200ea;

      --paper-indigo-50: #e8eaf6;
      --paper-indigo-100: #c5cae9;
      --paper-indigo-200: #9fa8da;
      --paper-indigo-300: #7986cb;
      --paper-indigo-400: #5c6bc0;
      --paper-indigo-500: #3f51b5;
      --paper-indigo-600: #3949ab;
      --paper-indigo-700: #303f9f;
      --paper-indigo-800: #283593;
      --paper-indigo-900: #1a237e;
      --paper-indigo-a100: #8c9eff;
      --paper-indigo-a200: #536dfe;
      --paper-indigo-a400: #3d5afe;
      --paper-indigo-a700: #304ffe;

      --paper-blue-50: #e3f2fd;
      --paper-blue-100: #bbdefb;
      --paper-blue-200: #90caf9;
      --paper-blue-300: #64b5f6;
      --paper-blue-400: #42a5f5;
      --paper-blue-500: #2196f3;
      --paper-blue-600: #1e88e5;
      --paper-blue-700: #1976d2;
      --paper-blue-800: #1565c0;
      --paper-blue-900: #0d47a1;
      --paper-blue-a100: #82b1ff;
      --paper-blue-a200: #448aff;
      --paper-blue-a400: #2979ff;
      --paper-blue-a700: #2962ff;

      --paper-light-blue-50: #e1f5fe;
      --paper-light-blue-100: #b3e5fc;
      --paper-light-blue-200: #81d4fa;
      --paper-light-blue-300: #4fc3f7;
      --paper-light-blue-400: #29b6f6;
      --paper-light-blue-500: #03a9f4;
      --paper-light-blue-600: #039be5;
      --paper-light-blue-700: #0288d1;
      --paper-light-blue-800: #0277bd;
      --paper-light-blue-900: #01579b;
      --paper-light-blue-a100: #80d8ff;
      --paper-light-blue-a200: #40c4ff;
      --paper-light-blue-a400: #00b0ff;
      --paper-light-blue-a700: #0091ea;

      --paper-cyan-50: #e0f7fa;
      --paper-cyan-100: #b2ebf2;
      --paper-cyan-200: #80deea;
      --paper-cyan-300: #4dd0e1;
      --paper-cyan-400: #26c6da;
      --paper-cyan-500: #00bcd4;
      --paper-cyan-600: #00acc1;
      --paper-cyan-700: #0097a7;
      --paper-cyan-800: #00838f;
      --paper-cyan-900: #006064;
      --paper-cyan-a100: #84ffff;
      --paper-cyan-a200: #18ffff;
      --paper-cyan-a400: #00e5ff;
      --paper-cyan-a700: #00b8d4;

      --paper-teal-50: #e0f2f1;
      --paper-teal-100: #b2dfdb;
      --paper-teal-200: #80cbc4;
      --paper-teal-300: #4db6ac;
      --paper-teal-400: #26a69a;
      --paper-teal-500: #009688;
      --paper-teal-600: #00897b;
      --paper-teal-700: #00796b;
      --paper-teal-800: #00695c;
      --paper-teal-900: #004d40;
      --paper-teal-a100: #a7ffeb;
      --paper-teal-a200: #64ffda;
      --paper-teal-a400: #1de9b6;
      --paper-teal-a700: #00bfa5;

      --paper-green-50: #e8f5e9;
      --paper-green-100: #c8e6c9;
      --paper-green-200: #a5d6a7;
      --paper-green-300: #81c784;
      --paper-green-400: #66bb6a;
      --paper-green-500: #4caf50;
      --paper-green-600: #43a047;
      --paper-green-700: #388e3c;
      --paper-green-800: #2e7d32;
      --paper-green-900: #1b5e20;
      --paper-green-a100: #b9f6ca;
      --paper-green-a200: #69f0ae;
      --paper-green-a400: #00e676;
      --paper-green-a700: #00c853;

      --paper-light-green-50: #f1f8e9;
      --paper-light-green-100: #dcedc8;
      --paper-light-green-200: #c5e1a5;
      --paper-light-green-300: #aed581;
      --paper-light-green-400: #9ccc65;
      --paper-light-green-500: #8bc34a;
      --paper-light-green-600: #7cb342;
      --paper-light-green-700: #689f38;
      --paper-light-green-800: #558b2f;
      --paper-light-green-900: #33691e;
      --paper-light-green-a100: #ccff90;
      --paper-light-green-a200: #b2ff59;
      --paper-light-green-a400: #76ff03;
      --paper-light-green-a700: #64dd17;

      --paper-lime-50: #f9fbe7;
      --paper-lime-100: #f0f4c3;
      --paper-lime-200: #e6ee9c;
      --paper-lime-300: #dce775;
      --paper-lime-400: #d4e157;
      --paper-lime-500: #cddc39;
      --paper-lime-600: #c0ca33;
      --paper-lime-700: #afb42b;
      --paper-lime-800: #9e9d24;
      --paper-lime-900: #827717;
      --paper-lime-a100: #f4ff81;
      --paper-lime-a200: #eeff41;
      --paper-lime-a400: #c6ff00;
      --paper-lime-a700: #aeea00;

      --paper-yellow-50: #fffde7;
      --paper-yellow-100: #fff9c4;
      --paper-yellow-200: #fff59d;
      --paper-yellow-300: #fff176;
      --paper-yellow-400: #ffee58;
      --paper-yellow-500: #ffeb3b;
      --paper-yellow-600: #fdd835;
      --paper-yellow-700: #fbc02d;
      --paper-yellow-800: #f9a825;
      --paper-yellow-900: #f57f17;
      --paper-yellow-a100: #ffff8d;
      --paper-yellow-a200: #ffff00;
      --paper-yellow-a400: #ffea00;
      --paper-yellow-a700: #ffd600;

      --paper-amber-50: #fff8e1;
      --paper-amber-100: #ffecb3;
      --paper-amber-200: #ffe082;
      --paper-amber-300: #ffd54f;
      --paper-amber-400: #ffca28;
      --paper-amber-500: #ffc107;
      --paper-amber-600: #ffb300;
      --paper-amber-700: #ffa000;
      --paper-amber-800: #ff8f00;
      --paper-amber-900: #ff6f00;
      --paper-amber-a100: #ffe57f;
      --paper-amber-a200: #ffd740;
      --paper-amber-a400: #ffc400;
      --paper-amber-a700: #ffab00;

      --paper-orange-50: #fff3e0;
      --paper-orange-100: #ffe0b2;
      --paper-orange-200: #ffcc80;
      --paper-orange-300: #ffb74d;
      --paper-orange-400: #ffa726;
      --paper-orange-500: #ff9800;
      --paper-orange-600: #fb8c00;
      --paper-orange-700: #f57c00;
      --paper-orange-800: #ef6c00;
      --paper-orange-900: #e65100;
      --paper-orange-a100: #ffd180;
      --paper-orange-a200: #ffab40;
      --paper-orange-a400: #ff9100;
      --paper-orange-a700: #ff6500;

      --paper-deep-orange-50: #fbe9e7;
      --paper-deep-orange-100: #ffccbc;
      --paper-deep-orange-200: #ffab91;
      --paper-deep-orange-300: #ff8a65;
      --paper-deep-orange-400: #ff7043;
      --paper-deep-orange-500: #ff5722;
      --paper-deep-orange-600: #f4511e;
      --paper-deep-orange-700: #e64a19;
      --paper-deep-orange-800: #d84315;
      --paper-deep-orange-900: #bf360c;
      --paper-deep-orange-a100: #ff9e80;
      --paper-deep-orange-a200: #ff6e40;
      --paper-deep-orange-a400: #ff3d00;
      --paper-deep-orange-a700: #dd2c00;

      --paper-brown-50: #efebe9;
      --paper-brown-100: #d7ccc8;
      --paper-brown-200: #bcaaa4;
      --paper-brown-300: #a1887f;
      --paper-brown-400: #8d6e63;
      --paper-brown-500: #795548;
      --paper-brown-600: #6d4c41;
      --paper-brown-700: #5d4037;
      --paper-brown-800: #4e342e;
      --paper-brown-900: #3e2723;

      --paper-grey-50: #fafafa;
      --paper-grey-100: #f5f5f5;
      --paper-grey-200: #eeeeee;
      --paper-grey-300: #e0e0e0;
      --paper-grey-400: #bdbdbd;
      --paper-grey-500: #9e9e9e;
      --paper-grey-600: #757575;
      --paper-grey-700: #616161;
      --paper-grey-800: #424242;
      --paper-grey-900: #212121;

      --paper-blue-grey-50: #eceff1;
      --paper-blue-grey-100: #cfd8dc;
      --paper-blue-grey-200: #b0bec5;
      --paper-blue-grey-300: #90a4ae;
      --paper-blue-grey-400: #78909c;
      --paper-blue-grey-500: #607d8b;
      --paper-blue-grey-600: #546e7a;
      --paper-blue-grey-700: #455a64;
      --paper-blue-grey-800: #37474f;
      --paper-blue-grey-900: #263238;

      
      --dark-divider-opacity: 0.12;
      --dark-disabled-opacity: 0.38; 
      --dark-secondary-opacity: 0.54;
      --dark-primary-opacity: 0.87;

      
      --light-divider-opacity: 0.12;
      --light-disabled-opacity: 0.3; 
      --light-secondary-opacity: 0.7;
      --light-primary-opacity: 1.0;
}

</style>
</custom-style><custom-style>
  <style is="custom-style">html {
  --primary-text-color: var(--light-theme-text-color);
      --primary-background-color: var(--light-theme-background-color);
      --secondary-text-color: var(--light-theme-secondary-color);
      --disabled-text-color: var(--light-theme-disabled-color);
      --divider-color: var(--light-theme-divider-color);
      --error-color: var(--paper-deep-orange-a700);

      
      --primary-color: var(--paper-indigo-500);
      --light-primary-color: var(--paper-indigo-100);
      --dark-primary-color: var(--paper-indigo-700);

      --accent-color: var(--paper-pink-a200);
      --light-accent-color: var(--paper-pink-a100);
      --dark-accent-color: var(--paper-pink-a400);


      
      --light-theme-background-color: #ffffff;
      --light-theme-base-color: #000000;
      --light-theme-text-color: var(--paper-grey-900);
      --light-theme-secondary-color: #737373;  
      --light-theme-disabled-color: #9b9b9b;  
      --light-theme-divider-color: #dbdbdb;

      
      --dark-theme-background-color: var(--paper-grey-900);
      --dark-theme-base-color: #ffffff;
      --dark-theme-text-color: #ffffff;
      --dark-theme-secondary-color: #bcbcbc;  
      --dark-theme-disabled-color: #646464;  
      --dark-theme-divider-color: #3c3c3c;

      
      --text-primary-color: var(--dark-theme-text-color);
      --default-primary-color: var(--primary-color);
}

</style>
</custom-style><script async="" src="./index_files/lazy.min.js"></script><script src="./index_files/loader.js"></script>
<!--[if lt IE 9]>
<script src='http://html5shim.googlecode.com/svn/trunk/html5.js' type='text/javascript'></script>
<![endif]-->
<!--[endif]>  <![endif]-->
<script type="application/ld+json">
{
  "@context": "http://schema.org",
  "@type": "WebSite",
  "url": "https://www.qwiklabs.com/",
  "potentialAction": {
    "@type": "SearchAction",
    "target": "https://www.qwiklabs.com/catalog?keywords={search_term_string}",
    "query-input": "required name=search_term_string"
  }
}
</script>
<script id="ze-snippet" src="./index_files/snippet.js"></script>


<meta name="csrf-param" content="authenticity_token">
<meta name="csrf-token" content="yz2RfUL06F6IOv8EBeUL2YE0AO1aMZkAAPntGGWkt6nfclteucGz+SirhWzTkTKFBrDCIGpo2rWM9L24Z/NUXA==">
<meta content="width=device-width, initial-scale=1.0, user-scalable=yes" name="viewport">
<meta content="1rRsY0INj8RvwB5EF5pwdxt2A2P9aDgAlsICaJ0d5w0" name="google-site-verification">
<meta content="#3681E4" property="msapplication-TileColor">
<meta content="/favicon-144.png" property="msapplication-TileImage">
<meta content="[{&quot;id&quot;:&quot;recaptcha_experiment&quot;,&quot;optimize_id&quot;:&quot;dpViOcLkT3qS4TvL2mRojA&quot;,&quot;title&quot;:&quot;No Recaptcha shown for trusted users&quot;,&quot;variant_index&quot;:1,&quot;variant&quot;:&quot;no_recaptcha&quot;}]" name="active-experiments">
<meta content="{&quot;userId&quot;:484237}" name="help-api-product-data">
<meta content="In this lab, you will use AWS managed services to implement a serverless architecture." name="description">
<meta content="Qwiklabs" name="author">
<meta content="Architecting on AWS - Lab 6 - Implementing a Serverless Architecture with AWS Managed Services | Qwiklabs" property="og:title">
<meta content="website" property="og:type">
<meta content="/favicon-144.png" property="og:image">
<meta content="Qwiklabs" property="og:site_name">
<meta content="In this lab, you will use AWS managed services to implement a serverless architecture." property="og:description">
<meta content="/qwiklabs_logo_900x887.png" property="og:logo" size="900x887">
<meta content="/qwiklabs_logo_994x187.png" property="og:logo" size="994x187">


<link href="https://aws.qwiklabs.com/favicon-32.png" rel="shortcut icon">
<link color="#3681E4" href="https://aws.qwiklabs.com/favicon-svg.svg" rel="mask-icon">
<link href="https://aws.qwiklabs.com/favicon-180.png" rel="apple-touch-icon-precomposed">



<link rel="stylesheet" media="screen" href="./index_files/css">


<link rel="stylesheet" media="all" href="./index_files/application-3c7614710f2c516a5837dd31a8c6f510e59940e28586f6f74da94f3c4574740d.css">

<style>
  :root {
    --primary-text-on-surface-color: #1A73E8;
    --primary-surface-color: #1A73E8;
    --primary-surface-color-rgb: 26,115,232;
    --primary-surface-color-light: #d1e3fa;
    --primary-surface-color-lightest: #e8f1fd;
    --text-on-primary-color: #FFFFFF;
    --accent-text-on-surface-color: #F29900;
    --accent-surface-color: #F9AB00;
    --accent-surface-color-rgb: 249,171,0;
    --accent-surface-color-light: #ffefcc;
    --text-on-accent-color: #202124;
  }
</style>



</head>
<body class="lab-show l-full no-nav application-new focuses focuses-show lab-show l-full no-nav " style="zoom: 1;">
<span class="hidden" id="flash-sibling-before"></span>

<div class="header-container">
<div class="header">
<ql-icon-button class="js-nav-toggle header__nav-panel-button l-mrm">menu</ql-icon-button>
<div class="header__title">
<ql-icon-button label="Back" href="/classrooms/53328" id="a3cedcf781b17b29" target="_self" tip="Back">arrow_back</ql-icon-button>

<h1 class="headline-5">
Architecting on AWS - Lab 6 - Implementing a Serverless Architecture with AWS Managed Services
</h1>
</div>
<div class="header__actions">
<ql-icon-button class="header__button--search js-header-search-bar-button">search</ql-icon-button>
<ql-icon-button id="control-panel-target" style="display: none;">
dashboard
</ql-icon-button>
<ql-menu for="control-panel-target" id="control-panel-menu" style="left: -1000px; top: -1000px; opacity: 0; visibility: hidden;" role="menu" aria-labelledby="control-panel-target"></ql-menu>

<ql-icon-button icon="help" id="help-menu-button" label="Open help menu" tip="Help"></ql-icon-button>
<ql-menu for="help-menu-button" id="help-menu" style="left: -1000px; top: -1000px; opacity: 0; visibility: hidden;" role="menu" aria-labelledby="help-menu-button">
<ql-menu-item data-analytics-action="opened_help" data-analytics-label="lab" label="Help Center" onclick="hallofmirrors.helpService.startHelp({&quot;productData&quot;:{&quot;userId&quot;:484237},&quot;context&quot;:&quot;lab&quot;})"></ql-menu-item>
<ql-menu-item href="https://support.google.com/qwiklabs/contact/contact_us" label="Email support" target="_blank"></ql-menu-item>
<ql-menu-item label="Chat support" onclick="ql.chat.open()"></ql-menu-item>
</ql-menu>

<ql-icon-button icon="language" id="language" label="Set locale" tip="Set locale"></ql-icon-button>
<ql-menu for="language" style="left: -1000px; top: -1000px; opacity: 0; visibility: hidden;" role="menu" aria-labelledby="language">
<ql-menu-item data-analytics-action="changed_locale" data-analytics-label="ar" href="/classrooms/53328/labs/299515?locale=ar" label="العربية‬‎" lang="ar"></ql-menu-item>
<ql-menu-item data-analytics-action="changed_locale" data-analytics-label="de" href="/classrooms/53328/labs/299515?locale=de" label="Deutsch" lang="de"></ql-menu-item>
<ql-menu-item data-analytics-action="changed_locale" data-analytics-label="en" href="/classrooms/53328/labs/299515?locale=en" label="English" lang="en"></ql-menu-item>
<ql-menu-item data-analytics-action="changed_locale" data-analytics-label="es" href="/classrooms/53328/labs/299515?locale=es" label="español (Latinoamérica)" lang="es"></ql-menu-item>
<ql-menu-item data-analytics-action="changed_locale" data-analytics-label="fr" href="/classrooms/53328/labs/299515?locale=fr" label="français" lang="fr"></ql-menu-item>
<ql-menu-item data-analytics-action="changed_locale" data-analytics-label="he" href="/classrooms/53328/labs/299515?locale=he" label="עברית" lang="he"></ql-menu-item>
<ql-menu-item data-analytics-action="changed_locale" data-analytics-label="id" href="/classrooms/53328/labs/299515?locale=id" label="bahasa Indonesia" lang="id"></ql-menu-item>
<ql-menu-item data-analytics-action="changed_locale" data-analytics-label="it" href="/classrooms/53328/labs/299515?locale=it" label="Italiano" lang="it"></ql-menu-item>
<ql-menu-item data-analytics-action="changed_locale" data-analytics-label="ja" href="/classrooms/53328/labs/299515?locale=ja" label="日本語" lang="ja"></ql-menu-item>
<ql-menu-item data-analytics-action="changed_locale" data-analytics-label="ko" href="/classrooms/53328/labs/299515?locale=ko" label="한국어" lang="ko"></ql-menu-item>
<ql-menu-item data-analytics-action="changed_locale" data-analytics-label="pl" href="/classrooms/53328/labs/299515?locale=pl" label="Polski" lang="pl"></ql-menu-item>
<ql-menu-item data-analytics-action="changed_locale" data-analytics-label="pt_BR" href="/classrooms/53328/labs/299515?locale=pt_BR" label="português (Brasil)" lang="pt_BR"></ql-menu-item>
<ql-menu-item data-analytics-action="changed_locale" data-analytics-label="pt_PT" href="/classrooms/53328/labs/299515?locale=pt_PT" label="português (Portugal)" lang="pt_PT"></ql-menu-item>
<ql-menu-item data-analytics-action="changed_locale" data-analytics-label="ru" href="/classrooms/53328/labs/299515?locale=ru" label="русский" lang="ru"></ql-menu-item>
<ql-menu-item data-analytics-action="changed_locale" data-analytics-label="tr" href="/classrooms/53328/labs/299515?locale=tr" label="Türkçe" lang="tr"></ql-menu-item>
<ql-menu-item data-analytics-action="changed_locale" data-analytics-label="zh" href="/classrooms/53328/labs/299515?locale=zh" label="简体中文" lang="zh"></ql-menu-item>
<ql-menu-item data-analytics-action="changed_locale" data-analytics-label="zh_TW" href="/classrooms/53328/labs/299515?locale=zh_TW" label="繁體中文" lang="zh_TW"></ql-menu-item>
</ql-menu>

<ql-icon-button id="my_account" label="My account" tip="My account">
<ql-avatar></ql-avatar>
</ql-icon-button>
<ql-menu for="my_account" id="my_account_menu" style="max-height: 640px; left: -1000px; top: -1000px; opacity: 0; visibility: hidden;" role="menu" aria-labelledby="my_account">
<div class="my-account-menu">
<ql-avatar class="l-mtl l-mbl" size="120"></ql-avatar>
<div class="my-account-menu__user-info l-mbl">
<h4 class="ql-subhead-1">kuldeep yadav</h4>
<p class="ql-body-2 text--light">kuldeep.yadav@perfios.com</p>
<p class="ql-body-2 text--light">
</p>
</div>
<div class="buttons l-mbl">
<a class="button button--hairline" id="settings" href="https://aws.qwiklabs.com/my_account/profile">Settings</a>
</div>
<hr>
<ql-button data-analytics-action="clicked_sign_out" href="/users/sign_out" method="delete">
Sign Out
</ql-button>
<div class="privacy l-mtl">
<a class="ql-caption text--light" href="https://aws.qwiklabs.com/privacy_policy">Privacy</a>
<span class="ql-caption text--light l-mls l-mrs">·</span>
<a class="ql-caption text--light" href="https://aws.qwiklabs.com/terms_of_service">Terms</a>
</div>
</div>
</ql-menu>

</div>
</div>
<div class="header__search-bar js-header-search-bar">
<form class="js-search-form-mobile" onsubmit="ql.searchFilter(); return false;" action="https://aws.qwiklabs.com/searches/lab" accept-charset="UTF-8" method="post"><input name="utf8" type="hidden" value="✓"><input type="hidden" name="authenticity_token" value="yz2RfUL06F6IOv8EBeUL2YE0AO1aMZkAAPntGGWkt6nfclteucGz+SirhWzTkTKFBrDCIGpo2rWM9L24Z/NUXA==">
<input type="text" name="keywords" id="search" placeholder="Search" maxlength="255" aria-label="catalog search bar">
</form>

<ql-icon-button class="js-close-search-bar">close</ql-icon-button>
</div>
</div>

<nav class="nav-bar">
<a class="nav-bar__item js-navigation-button" href="https://aws.qwiklabs.com/"><ql-icon class="nav-bar__item__icon">
home
</ql-icon>
<span class="nav-bar__item__label">
Home
</span>
</a>
<a class="nav-bar__item js-navigation-button" href="https://aws.qwiklabs.com/catalog"><ql-icon class="nav-bar__item__icon">
school
</ql-icon>
<span class="nav-bar__item__label">
Catalog
</span>
</a>
<a class="nav-bar__item js-navigation-button  active" aria-current="page" href="https://aws.qwiklabs.com/my_learning"><ql-icon class="nav-bar__item__icon">
event_note
</ql-icon>
<span class="nav-bar__item__label">
My Learning
</span>
</a>
</nav>

<nav class="nav-panel js-nav-panel">
<div class="nav-panel__logo">
<div class="custom-logo"><img alt="Logo" src="./index_files/i0qFEQoJiBanlKZQElmSw+6HzGe37MLn2bL3nInH6MM="></div>
</div>
<a title="Home" tabindex="-1" class="nav-panel__item js-navigation-button" href="https://aws.qwiklabs.com/"><ql-icon class="nav-panel__item__icon">
home
</ql-icon>
<div class="nav-panel__item__label">
Home
</div>
</a>
<a title="Catalog" tabindex="-1" class="nav-panel__item js-navigation-button" href="https://aws.qwiklabs.com/catalog"><ql-icon class="nav-panel__item__icon">
school
</ql-icon>
<div class="nav-panel__item__label">
Catalog
</div>
</a>
<a title="My Learning" tabindex="-1" class="nav-panel__item js-navigation-button active" aria-current="page" href="https://aws.qwiklabs.com/my_learning"><ql-icon class="nav-panel__item__icon">
event_note
</ql-icon>
<div class="nav-panel__item__label">
My Learning
</div>
</a>
<div class="nav-panel__spacer"></div>
<a title="Profile" tabindex="-1" class="nav-panel__item js-navigation-button" href="https://aws.qwiklabs.com/my_account/profile"><ql-icon class="nav-panel__item__icon">
account_circle
</ql-icon>
<div class="nav-panel__item__label">
Profile
</div>
</a>
<a title="Credits &amp; Subscriptions" tabindex="-1" class="nav-panel__item js-navigation-button" href="https://aws.qwiklabs.com/my_account/credits"><ql-icon class="nav-panel__item__icon">
money
</ql-icon>
<div class="nav-panel__item__label">
Credits &amp; Subscriptions
</div>
</a>
<a title="Security" tabindex="-1" class="nav-panel__item js-navigation-button" href="https://aws.qwiklabs.com/my_account/security"><ql-icon class="nav-panel__item__icon">
security
</ql-icon>
<div class="nav-panel__item__label">
Security
</div>
</a>
<div class="nav-panel__spacer"></div>
<a class="nav-panel__item" tabindex="-1" href="https://aws.qwiklabs.com/classrooms/53328/labs/299515#"><ql-help>
<div class="nav-panel__help-item">
<ql-icon class="nav-panel__item__icon">help</ql-icon>
<div class="nav-panel__item__label">
Help
</div>
</div>
</ql-help>
</a><div class="nav-panel__small-links">
<a tabindex="-1" href="https://aws.qwiklabs.com/privacy_policy">Privacy</a>
<a tabindex="-1" href="https://aws.qwiklabs.com/terms_of_service">Terms</a>
</div>
</nav>
<div class="nav-panel__overlay js-nav-toggle"></div>

<main class="js-main">
<div class="l-main-wrapper" id="main-wrapper">





<ql-drawer-container class="js-lab-state" data-analytics-payload="{&quot;label&quot;:&quot;Architecting on AWS - Lab 6 - Implementing a Serverless Architecture with AWS Managed Services&quot;,&quot;lab_name&quot;:&quot;Architecting on AWS - Lab 6 - Implementing a Serverless Architecture with AWS Managed Services&quot;,&quot;classroom_name&quot;:null,&quot;deployment&quot;:&quot;aws&quot;}" data-focus-id="299515" data-lab-billing-limit="0.0" data-lab-duration="10800" data-parent="classroom" id="lab-container">
<ql-drawer id="terminal-drawer" slot="drawer" style="width: calc(100% - 480px); visibility: hidden;" tabindex="-1" aria-hidden="true" role="region" mode="side">
<iframe allow="clipboard-read" class="terminal" id="embedded-resource" src="./index_files/saved_resource.html"></iframe>
</ql-drawer>
<ql-drawer-content class="js-lab-wrapper" id="lab-content" slot="drawer-content">
<ql-drawer-container id="lab-content-container">
<ql-drawer id="control-panel-drawer" open="" slot="drawer" width="320" aria-hidden="false" role="region" mode="side" style="width: 320px; visibility: visible;">

<ql-lab-control-panel class="ql-lab-control-panel__max-height control-panel js-lab-control-panel" connectionfiles="[]" labcontrolbutton="{&quot;disabled&quot;:false,&quot;pending&quot;:false,&quot;running&quot;:false}" labdetails="[]" labtimer="{&quot;ticking&quot;:false,&quot;secondsRemaining&quot;:10800}" studentresources="[]">
</ql-lab-control-panel></ql-drawer>
<ql-drawer-content id="lab-instructions" slot="drawer-content">
<ql-snackbar id="alert-snackbar"></ql-snackbar>
<div class="alert alert--fake js-alert">
<p class="alert__message js-alert-message" role="alert"></p>
<ql-icon-button class="alert__close js-alert-close" icon="clear"></ql-icon-button>
<iframe class="l-ie-iframe-fix" src="./index_files/saved_resource(1).html"></iframe>
</div>
<div class="lab-content__renderable-instructions js-lab-content">
<div class="lab-preamble">
<h1 class="lab-preamble__title">
Architecting on AWS - Lab 6 - Implementing a Serverless Architecture with AWS Managed Services
</h1>
<div class="lab-preamble__details subtitle-headline-1">
<span>3 hours </span>
<span>Free</span>
<div class="lab__rating">
<a aria-label="Lab Reviews" href="https://aws.qwiklabs.com/focuses/299515/reviews?parent=classroom"><div class="rateit" data-rateit-readonly="true" data-rateit-value="4.7648"><div class="rateit-reset" style="display: none;"></div><div class="rateit-range" style="width: 80px; height: 16px;"><div class="rateit-selected" style="height: 16px; width: 76.2368px;"></div><div class="rateit-hover" style="height:16px"></div></div></div>

</a></div>
</div>
</div>

<div class="markdown-lab-instructions js-markdown-instructions no-select" id="markdown-lab-instructions">
<p><img src="./index_files/aws-logo.png" alt=""></p>



<p>© 2021 Amazon Web Services, Inc. and its affiliates. All rights reserved. This work may not be reproduced or redistributed, in whole or in part, without prior written permission from Amazon Web Services, Inc. Commercial copying, lending, or selling is prohibited. All trademarks are the property of their owners.</p>

<p>Corrections, feedback, or other questions? Contact us at <a href="https://support.aws.amazon.com/#/contacts/aws-training" target="_blank"><em>AWS Training and Certification</em></a>.</p>

<h2 id="step1">Lab overview</h2>

<p>Traditionally, applications run on servers. These can be physical servers or virtual environments running on top of physical servers, but either requires purchasing and provisioning servers and managing capacity. As an alternative, AWS Lambda can run serverless code without having to pre-allocate servers. Simply provide the code and define a trigger. The function can run whenever required—once per week or hundreds of times per second—and you only pay for what you use.</p>

<p>This lab demonstrates how to trigger a Lambda function when a file is uploaded to Amazon Simple Storage Service (Amazon S3). The file will be loaded into an Amazon DynamoDB table, and the data will be available to view on a dashboard page that pulls the data directly from DynamoDB. The solution is completely serverless, automatically scalable, and incurs very little cost.</p>

<p>The system does <em>not</em> use Amazon Elastic Compute Cloud (Amazon EC2). The system will automatically scale when it is used and incur practically no cost when it is <em>not</em> being used (just a few cents for data storage).</p>

<p><strong>Objectives</strong></p>

<p>After completing this lab, you will be able to:</p>
<ul>
<li>Create a Lambda function</li>
<li>Trigger a Lambda function from Amazon S3 and DynamoDB</li>
<li>Configure Amazon SNS to send notifications</li>
</ul>
<p><strong>Scenario</strong></p>

<p>You are creating an inventory tracking system. Stores from around the world will upload inventory files to Amazon S3. Your team wants to be able to view the inventory levels and send a notification when inventory levels are low.</p>

<p>The following diagram shows the workflow:</p>

<p><img src="./index_files/flow.png" alt="Workflow"></p>

<p>The scenario workflow is as follows:</p>
<ul>
<li>You upload an inventory file to an Amazon S3 bucket.</li>
<li>This triggers a Lambda function, which will read the file and insert items into a DynamoDB table.</li>
<li>A serverless, web-based dashboard application uses Amazon Cognito to authenticate to AWS and then gain access to the DynamoDB table to display inventory levels.</li>
<li>Another Lambda function receives updates from the DynamoDB table and sends a message to an Amazon Simple Notification Service (Amazon SNS) topic when an inventory item is out of stock.</li>
<li>Amazon SNS then sends an SMS or email notification to you to request additional inventory.</li>
</ul>
<p><strong>Duration</strong></p>

<p>This lab requires approximately <strong>20 minutes</strong> to complete.</p>



<h2 id="step2">Start Lab</h2>
<ol start="1">
<li>At the top of your screen, launch your lab by choosing <span style="background-color:#34A853;font-family:Google Sans;font-weight:bold;font-size:90%;color:white;border-color:#34A853;border-radius:4px;border-width:2px;border-style:solid;padding-top:5px;padding-bottom:5px;padding-left:10px;padding-right:10px;">Start Lab</span>
</li>
</ol>
<p>This starts the process of provisioning your lab resources. An estimated amount of time to provision your lab resources is displayed. You must wait for your resources to be provisioned before continuing.</p>

<p><i class="fas fa-info-circle"></i> If you are prompted for a token, use the one distributed to you (or credits you have purchased). </p>
<ol start="2">
<li>Open your lab by choosing <span style="background-color:white;font-family:Google Sans;font-weight:bold;font-size:90%;color:#1a73e8;border-color:#dadce0;border-radius:4px;border-width:2px;border-style:solid;padding-top:5px;padding-bottom:5px;padding-left:10px;padding-right:10px;">Open Console</span>
</li>
</ol>
<p>This opens an AWS Management Console sign-in page.</p>
<ol start="3">
<li>On the sign-in page, configure:</li>
</ol><ul>
<li>
<strong>IAM user name:</strong> <input readonly="" class="copyable-inline-input" size="10" type="text" value="awsstudent">
</li>
<li>
<strong>Password:</strong> Paste the value of <strong>Password</strong> from the left side of the lab page</li>
<li>Choose <span style="background-color:#257ACF;font-weight:bold;font-size:90%;color:white;border-radius:5px;padding-top:3px;padding-bottom:3px;padding-left:10px;padding-right:10px;white-space:nowrap;">Sign In</span>
</li>
</ul>
<p><i class="fas fa-exclamation-triangle"></i> <strong>Do not change the Region unless instructed.</strong></p>



<h3>Common Login Errors</h3>

<p><strong>Error: You must first log out</strong></p>

<p><img src="./index_files/logouterror.png" alt=""></p>

<p>If you see the message, <strong>You must first log out before logging into a different AWS account:</strong> </p>
<ul>
<li>Choose <strong>click here</strong>
</li>
<li>Close your browser tab to return to your initial lab window</li>
<li>Choose <span style="background-color:white;font-family:Google Sans;font-weight:bold;font-size:90%;color:#1a73e8;border-color:#dadce0;border-radius:4px;border-width:2px;border-style:solid;padding-top:5px;padding-bottom:5px;padding-left:10px;padding-right:10px;">Open Console</span> again</li>
</ul>


<h2 id="step3">Task 1: Creating a Lambda function to load data</h2>

<p>In this task, you create a Lambda function to process an inventory file. The Lambda function will read the file and insert information into a DynamoDB table, as shown in the following diagram:</p>

<p><img src="./index_files/lambda-1.png" alt="Lambda function"></p>
<ol start="4">
<li><p>In the AWS Management Console, on the <span style="background-color:#232f3e;font-weight:bold;font-size:90%;color:white;padding-top:3px;padding-bottom:3px;padding-left:10px;padding-right:10px;">Services <i class="fas fa-angle-down"></i></span> menu, click <strong>Lambda</strong>.</p></li>
<li><p>Click <span style="background-color:#ec7211;font-weight:bold;font-size:90%;color:white;padding-top:3px;padding-bottom:3px;padding-left:10px;padding-right:10px;white-space:nowrap;">Create function</span></p></li>
</ol>
<p><i class="fas fa-info-circle"></i> <strong>Note</strong> A <em>blueprint</em> is a code template for writing a Lambda function. Blueprints are provided for standard Lambda triggers, such as creating Alexa skills and processing Amazon Kinesis Data Firehose streams. This lab provides you with a pre-written Lambda function, so you will author the function from scratch.</p>
<ol start="6">
<li>Configure the following:</li>
</ol><ul>
<li>Select <strong>Author from scratch</strong>
</li>
<li>
<strong>Function name:</strong> <input readonly="" class="copyable-inline-input" size="14" type="text" value="Load-Inventory">
</li>
<li>
<strong>Runtime:</strong> <em>Python 3.8</em>
</li>
<li>Expand <i class="fas fa-caret-right"></i> <strong>Change default execution role</strong>
</li>
<li>
<strong>Execution role:</strong> Select <strong>Use an existing role</strong>
</li>
<li>
<strong>Existing role:</strong> <em>Lambda-Load-Inventory-Role</em>
</li>
</ul>
<p>This role provides your Lambda function with the permissions it needs to access Amazon S3 and DynamoDB.</p>
<ol start="7">
<li><p>Click <span style="background-color:#ec7211;font-weight:bold;font-size:90%;color:white;padding-top:3px;padding-bottom:3px;padding-left:10px;padding-right:10px;white-space:nowrap;">Create function</span></p></li>
<li><p>Click the <strong>Code</strong> tab.</p></li>
<li><p>In the <strong>Code source</strong> section, double-click the <strong>lambda_function.py</strong> file.</p></li>
<li><p>Delete all of the code that appears in the code editor.</p></li>
<li><p>Copy and paste the following code into the <strong>Function code</strong> editor:</p></li>
</ol><pre class="highlight python"><code><span class="c"># Load-Inventory Lambda function</span>
<span class="c">#</span>
<span class="c"># This function is triggered by an object being created in an Amazon S3 bucket.</span>
<span class="c"># The file is downloaded and each line is inserted into a DynamoDB table.</span>

<span class="kn">import</span> <span class="nn">json</span><span class="p">,</span> <span class="n">urllib</span><span class="p">,</span> <span class="n">boto3</span><span class="p">,</span> <span class="n">csv</span>

<span class="c"># Connect to S3 and DynamoDB</span>
<span class="n">s3</span> <span class="o">=</span> <span class="n">boto3</span><span class="o">.</span><span class="n">resource</span><span class="p">(</span><span class="s">'s3'</span><span class="p">)</span>
<span class="n">dynamodb</span> <span class="o">=</span> <span class="n">boto3</span><span class="o">.</span><span class="n">resource</span><span class="p">(</span><span class="s">'dynamodb'</span><span class="p">)</span>

<span class="c"># Connect to the DynamoDB tables</span>
<span class="n">inventoryTable</span> <span class="o">=</span> <span class="n">dynamodb</span><span class="o">.</span><span class="n">Table</span><span class="p">(</span><span class="s">'Inventory'</span><span class="p">);</span>

<span class="c"># This handler is run every time the Lambda function is triggered</span>
<span class="k">def</span> <span class="nf">lambda_handler</span><span class="p">(</span><span class="n">event</span><span class="p">,</span> <span class="n">context</span><span class="p">):</span>

  <span class="c"># Show the incoming event in the debug log</span>
  <span class="k">print</span><span class="p">(</span><span class="s">"Event received by Lambda function: "</span> <span class="o">+</span> <span class="n">json</span><span class="o">.</span><span class="n">dumps</span><span class="p">(</span><span class="n">event</span><span class="p">,</span> <span class="n">indent</span><span class="o">=</span><span class="mi">2</span><span class="p">))</span>

  <span class="c"># Get the bucket and object key from the event</span>
  <span class="n">bucket</span> <span class="o">=</span> <span class="n">event</span><span class="p">[</span><span class="s">'Records'</span><span class="p">][</span><span class="mi">0</span><span class="p">][</span><span class="s">'s3'</span><span class="p">][</span><span class="s">'bucket'</span><span class="p">][</span><span class="s">'name'</span><span class="p">]</span>
  <span class="n">key</span> <span class="o">=</span> <span class="n">urllib</span><span class="o">.</span><span class="n">parse</span><span class="o">.</span><span class="n">unquote_plus</span><span class="p">(</span><span class="n">event</span><span class="p">[</span><span class="s">'Records'</span><span class="p">][</span><span class="mi">0</span><span class="p">][</span><span class="s">'s3'</span><span class="p">][</span><span class="s">'object'</span><span class="p">][</span><span class="s">'key'</span><span class="p">])</span>
  <span class="n">localFilename</span> <span class="o">=</span> <span class="s">'/tmp/inventory.txt'</span>

  <span class="c"># Download the file from S3 to the local filesystem</span>
  <span class="k">try</span><span class="p">:</span>
    <span class="n">s3</span><span class="o">.</span><span class="n">meta</span><span class="o">.</span><span class="n">client</span><span class="o">.</span><span class="n">download_file</span><span class="p">(</span><span class="n">bucket</span><span class="p">,</span> <span class="n">key</span><span class="p">,</span> <span class="n">localFilename</span><span class="p">)</span>
  <span class="k">except</span> <span class="nb">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
    <span class="k">print</span><span class="p">(</span><span class="n">e</span><span class="p">)</span>
    <span class="k">print</span><span class="p">(</span><span class="s">'Error getting object {} from bucket {}. Make sure they exist and your bucket is in the same region as this function.'</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">key</span><span class="p">,</span> <span class="n">bucket</span><span class="p">))</span>
    <span class="k">raise</span> <span class="n">e</span>

  <span class="c"># Read the Inventory CSV file</span>
  <span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="n">localFilename</span><span class="p">)</span> <span class="k">as</span> <span class="n">csvfile</span><span class="p">:</span>
    <span class="n">reader</span> <span class="o">=</span> <span class="n">csv</span><span class="o">.</span><span class="n">DictReader</span><span class="p">(</span><span class="n">csvfile</span><span class="p">,</span> <span class="n">delimiter</span><span class="o">=</span><span class="s">','</span><span class="p">)</span>

    <span class="c"># Read each row in the file</span>
    <span class="n">rowCount</span> <span class="o">=</span> <span class="mi">0</span>
    <span class="k">for</span> <span class="n">row</span> <span class="ow">in</span> <span class="n">reader</span><span class="p">:</span>
      <span class="n">rowCount</span> <span class="o">+=</span> <span class="mi">1</span>

      <span class="c"># Show the row in the debug log</span>
      <span class="k">print</span><span class="p">(</span><span class="n">row</span><span class="p">[</span><span class="s">'store'</span><span class="p">],</span> <span class="n">row</span><span class="p">[</span><span class="s">'item'</span><span class="p">],</span> <span class="n">row</span><span class="p">[</span><span class="s">'count'</span><span class="p">])</span>

      <span class="k">try</span><span class="p">:</span>
        <span class="c"># Insert Store, Item, and Count into the Inventory table</span>
        <span class="n">inventoryTable</span><span class="o">.</span><span class="n">put_item</span><span class="p">(</span>
          <span class="n">Item</span><span class="o">=</span><span class="p">{</span>
            <span class="s">'Store'</span><span class="p">:</span>  <span class="n">row</span><span class="p">[</span><span class="s">'store'</span><span class="p">],</span>
            <span class="s">'Item'</span><span class="p">:</span>   <span class="n">row</span><span class="p">[</span><span class="s">'item'</span><span class="p">],</span>
            <span class="s">'Count'</span><span class="p">:</span>  <span class="nb">int</span><span class="p">(</span><span class="n">row</span><span class="p">[</span><span class="s">'count'</span><span class="p">])})</span>

      <span class="k">except</span> <span class="nb">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
         <span class="k">print</span><span class="p">(</span><span class="n">e</span><span class="p">)</span>
         <span class="k">print</span><span class="p">(</span><span class="s">"Unable to insert data into DynamoDB table"</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">e</span><span class="p">))</span>

    <span class="c"># Finished!</span>
    <span class="k">return</span> <span class="s">"</span><span class="si">%</span><span class="s">d counts inserted"</span> <span class="o">%</span> <span class="n">rowCount</span>
</code><button class="button button--text button--small copy-button js-copy-button-0"><ql-icon>content_copy</ql-icon></button></pre>
<p>Examine the code. It performs the following steps:</p>
<ul>
<li>Download the file that was uploaded to Amazon S3 and triggered the function.</li>
<li>Loop through each line in the file.</li>
<li>Insert the data into the DynamoDB <em>Inventory</em> table.</li>
</ul><ol start="12">
<li>Click <span style="background-color:#ec7211;font-weight:bold;font-size:90%;color:white;padding-top:3px;padding-bottom:3px;padding-left:10px;padding-right:10px;white-space:nowrap;">Deploy</span>
</li>
</ol>
<p>Next, you will configure Amazon S3 to trigger the Lambda function when a file is uploaded.</p>

<h2 id="step4">Task 2: Configuring an Amazon S3 event</h2>

<p>Stores from around the world will provide inventory files to load into the inventory tracking system. Rather than uploading files via FTP, the stores can upload directly to Amazon S3. This can be done via a web page, a script, or as part of a program. Once a file is received, the Lambda function will be triggered, and it will load the inventory file into a DynamoDB table, as shown in the following diagram:</p>

<p><img src="./index_files/s3-event.png" alt="Lambda function"></p>

<p>In this task, you create an Amazon S3 bucket and configure it to trigger the Lambda function.</p>
<ol start="13">
<li><p>On the <span style="background-color:#232f3e;font-weight:bold;font-size:90%;color:white;padding-top:3px;padding-bottom:3px;padding-left:10px;padding-right:10px;">Services <i class="fas fa-angle-down"></i></span> menu, click <strong>S3</strong>.</p></li>
<li><p>Click <span style="background-color:#ec7211;font-weight:bold;font-size:90%;color:white;padding-top:3px;padding-bottom:3px;padding-left:10px;padding-right:10px;white-space:nowrap;">Create bucket</span></p></li>
</ol>
<p>Each bucket must have a unique name, so you will add a random number to the bucket name. For example: <em>inventory-123</em></p>
<ol start="15">
<li><p>For <strong>Bucket name</strong> enter <input readonly="" class="copyable-inline-input" size="13" type="text" value="inventory-123"> (Replacing <em>123</em> with a random number)</p></li>
<li><p>At the bottom of the window, click <span style="background-color:#ec7211;font-weight:bold;font-size:90%;color:white;padding-top:3px;padding-bottom:3px;padding-left:10px;padding-right:10px;white-space:nowrap;">Create bucket</span></p></li>
</ol>
<p><i class="fas fa-comment"></i> <strong>Note</strong> If you receive an error stating that a bucket with the same name already exists, then change the bucket name and try again until it is accepted.</p>

<p>Now, configure the bucket to automatically trigger the Lambda function whenever a file is uploaded.</p>
<ol start="17">
<li><p>Click the name of your <strong>inventory-xxxx</strong> bucket.</p></li>
<li><p>Click the <strong>Properties</strong> tab.</p></li>
<li><p>Scroll down to <strong>Event notifications</strong>, then click <span style="background-color:white;font-weight:bold;font-size:90%;color:#545b64;border-color:#545b64;border-radius:2px;border-width:1px;border-style:solid;padding-top:3px;padding-bottom:3px;padding-left:10px;padding-right:10px;">Create event notification</span></p></li>
</ol>
<p>You will configure an event to trigger when an object is created in the S3 bucket.</p>
<ul>
<li>Under <strong>General configuration</strong> section, Enter <strong>Event name:</strong> as <input readonly="" class="copyable-inline-input" size="14" type="text" value="Load-Inventory">
</li>
<li>Under <strong>Event types</strong> section, Select <i class="far fa-check-square"></i> All object create events</li>
<li>Under <strong>Destination</strong> section, Choose <em>Lambda Function</em>
</li>
<li>From <strong>Specify Lambda function</strong> choose <strong>Choose from your Lambda functions</strong> <em>Load-Inventory</em>
</li>
<li>Click <span style="background-color:#ec7211;font-weight:bold;font-size:90%;color:white;padding-top:3px;padding-bottom:3px;padding-left:10px;padding-right:10px;white-space:nowrap;">Save changes</span>
</li>
</ul>
<p>This tells Amazon S3 to trigger the <em>Load-Inventory</em> Lambda function you created earlier whenever an object is created in the bucket.</p>

<p>Your bucket is now ready to receive inventory files.</p>

<h2 id="step5">Task 3: Testing the loading process</h2>

<p>You are now ready to test the inventory file loading process. You will upload an inventory file, then check that it loaded successfully. The following diagram shows these steps. You will test the notification park of the workflow in a later task.</p>

<p><img src="./index_files/load-test.png" alt="Load Test"></p>
<ol start="20">
<li><p>Right-click the following link and download the .zip file: <a href="https://us-east-1-tcprod.s3.amazonaws.com/courses/ILT-TF-200-ARCHIT/v6.8.26/lab-6-serverless/web/inventory-files.zip" target="_blank">inventory-files.zip</a></p></li>
<li><p>Unzip the file.</p></li>
</ol>
<p>The .zip file contains multiple inventory .csv files, which you can use to test the system. The Berlin file contains the following data:</p>
<pre class="highlight plaintext"><code>store,item,count
Berlin,Echo Dot,12
Berlin,Echo (2nd Gen),19
Berlin,Echo Show,18
Berlin,Echo Plus,0
Berlin,Echo Look,10
Berlin,Amazon Tap,15
</code><button class="button button--text button--small copy-button js-copy-button-1"><ql-icon>content_copy</ql-icon></button></pre><ol start="22">
<li><p>In the console, return to your S3 bucket by clicking the <strong>Amazon S3</strong> tab at the top of the page.</p></li>
<li><p>Click the name of your <strong>inventory-xxxx</strong> bucket.</p></li>
<li><p>Click <span style="background-color:#ec7211;font-weight:bold;font-size:90%;color:white;padding-top:3px;padding-bottom:3px;padding-left:10px;padding-right:10px;white-space:nowrap;">Upload</span>.</p></li>
<li><p><strong>Upload</strong> window will get open, upload one of the CSV files to the bucket by clicking <strong>Add files</strong> button. (You can choose any of the inventory files, but only upload one of them.)</p></li>
<li><p>Click <span style="background-color:#ec7211;font-weight:bold;font-size:90%;color:white;padding-top:3px;padding-bottom:3px;padding-left:10px;padding-right:10px;white-space:nowrap;">Upload</span> at the bottom of the page.</p></li>
<li><p>Click <strong>Exit</strong> button on the <strong>Upload: status</strong> page to return back to the Bucket Overview window.</p></li>
</ol>
<p>Amazon S3 automatically triggers the Lambda function, which loads the data into a DynamoDB table.</p>

<p>A serverless dashboard application has been provided for you to view the results.</p>
<ol start="28">
<li><p>Copy the <strong>Dashboard</strong> URL shown to the left of the instructions you are currently reading.</p></li>
<li><p>Open a new web browser tab, paste the URL you copied, and press ENTER.</p></li>
</ol>
<p>The dashboard application displays, showing the inventory data you loaded into the bucket. If your dashboard looks like the following image, the application was able to retrieve the data from DynamoDB, which proves that the Lambda function was triggered successfully:</p>

<p><img src="./index_files/dashboard.png" alt="Dashboard"></p>

<p><i class="fas fa-exclamation-triangle"></i> <strong>Note</strong> If no information is displayed, ask your instructor to help diagnose the problem.</p>

<p>This dashboard application is served as a static web page from Amazon S3. The dashboard authenticates via Amazon Cognito as an <em>anonymous user</em>, which provides sufficient permission for the dashboard to retrieve data from DynamoDB.</p>

<p>You can also view the data within the DynamoDB table.</p>
<ol start="30">
<li><p>Return to the AWS Management Console browser tab. On the <span style="background-color:#232f3e;font-weight:bold;font-size:90%;color:white;padding-top:3px;padding-bottom:3px;padding-left:10px;padding-right:10px;">Services <i class="fas fa-angle-down"></i></span> menu, click <strong>DynamoDB</strong>.</p></li>
<li><p>In the left navigation pane, click <strong>Tables</strong>.</p></li>
<li><p>Click the name of the <strong>Inventory</strong> table.</p></li>
<li><p>Click the <strong>Items</strong> tab.</p></li>
</ol>
<p>The data from the inventory file is displayed, showing the Store, Item, and inventory Count.</p>

<h2 id="step6">Task 4: Configuring notifications</h2>

<p>Now that you can quickly view the inventory files through the web application, you wish to notify inventory management staff when a store runs out of an item. For this serverless notification functionality, you will use Amazon Simple Notification Service (Amazon SNS), as shown in the following diagram:</p>

<p><img src="./index_files/sns.png" alt="Load Test"></p>

<p>Amazon SNS is a flexible, fully managed publish/subscribe (pub/sub) messaging and mobile notification service for the delivery of messages to subscribing endpoints and clients. With Amazon SNS, you can fan out messages to a large number of subscribers, including distributed systems and services, and mobile devices.</p>
<ol start="34">
<li><p>On the <span style="background-color:#232f3e;font-weight:bold;font-size:90%;color:white;padding-top:3px;padding-bottom:3px;padding-left:10px;padding-right:10px;">Services <i class="fas fa-angle-down"></i></span> menu, click <strong>Simple Notification Service</strong>.</p></li>
<li><p>In the left navigation pane, click <strong>Topics</strong></p></li>
<li><p>Click <span style="background-color:#ec7211;font-weight:bold;font-size:90%;color:white;padding-top:3px;padding-bottom:3px;padding-left:10px;padding-right:10px;white-space:nowrap;">Create topic</span></p></li>
<li><p>Select <strong>Standard</strong> option</p></li>
<li><p>In the <strong>Create topic</strong> box, for <strong>Name</strong>, input a unique topic name. Such as <input readonly="" class="copyable-inline-input" size="7" type="text" value="NoStock"> followed by 4 random digits.</p></li>
<li><p>Remember this topic name for later tasks.</p></li>
<li><p>Click <span style="background-color:#ec7211;font-weight:bold;font-size:90%;color:white;padding-top:3px;padding-bottom:3px;padding-left:10px;padding-right:10px;white-space:nowrap;">Create topic</span></p></li>
</ol>
<p>To receive notifications you must <em>subscribe</em> to the topic. You can choose to receive notifications via several methods, such as SMS or email.</p>
<ol start="41">
<li>On the lower half of the page, click <span style="background-color:#ec7211;font-weight:bold;font-size:90%;color:white;padding-top:3px;padding-bottom:3px;padding-left:10px;padding-right:10px;white-space:nowrap;">Create subscription</span> and configure either email or SMS options provided below:</li>
</ol><ul>
<li>
<p>To subscribe an email address to an Amazon SNS topic:</p>
<ul>
<li>
<strong>Protocol:</strong> choose <em>Email</em>.</li>
<li>
<strong>Endpoint:</strong> <em>Enter the valid email address that you can access from the classroom</em>.</li>
<li>Click <span style="background-color:#ec7211;font-weight:bold;font-size:90%;color:white;padding-top:3px;padding-bottom:3px;padding-left:10px;padding-right:10px;white-space:nowrap;">Create subscription</span>
</li>
</ul>
</li>
</ul>
<p><i class="fas fa-sticky-note fa-lg" style="color:orange;"></i> <strong>Note</strong>: You must <strong>confirm</strong> the subscription before the email address can start to receive messages.</p>
<ul>
<li>
<p>To confirm a subscription:</p>
<ul>
<li>Check your email inbox and choose <strong>Confirm subscription</strong> in the email from Amazon SNS.</li>
<li>Amazon SNS opens your web browser and displays a subscription confirmation with your subscription ID.</li>
</ul>
</li>
</ul>
<p>Now that the topic and subscription are set up, any message sent to the SNS topic will be sent to your email.</p>

<p><i class="fas fa-sticky-note fa-lg" style="color:orange;"></i> <strong>Note</strong>: For <a href="https://aws.qwiklabs.com/classrooms/53328/labs/299515#sms-steps" target="_blank"> steps</a> how-to subscribe a mobile text messaging (SMS) to an Amazon SNS topic refer to Additional Resources section at the end of the lab.</p>

<h2 id="step7">Task 5: Creating a Lambda function to send notifications</h2>

<p>You could modify the existing <em>Load-Inventory</em> Lambda function to check inventory levels while the file is being loaded, but this is not a good architectural practice. Rather than overloading the <em>Load-Inventory</em> function with business logic, create another Lambda function that is triggered whenever data is loaded into the DynamoDB table. This function will be triggered by a <em>DynamoDB Stream</em>.</p>

<p>There are several benefits to this architectural approach:</p>
<ul>
<li>Each Lambda function performs a single, specific function. This makes the code simpler and more maintainable.</li>
<li>You can add additional business logic by creating additional Lambda functions. Each function operates independently, so existing functionality is not impacted.</li>
</ul>
<p>In this task, you create another Lambda function that looks at inventory as it is loaded into the DynamoDB table. If the function notices that an item is out of stock (the count equals 0), the function will send a notification via the Amazon SNS topic you created earlier.</p>

<p>The following diagram shows this workflow:</p>

<p><img src="./index_files/lambda-2.png" alt="Load Test"></p>
<ol start="42">
<li><p>On the <span style="background-color:#232f3e;font-weight:bold;font-size:90%;color:white;padding-top:3px;padding-bottom:3px;padding-left:10px;padding-right:10px;">Services <i class="fas fa-angle-down"></i></span> menu, click <strong>Lambda</strong>.</p></li>
<li><p>Click <span style="background-color:#ec7211;font-weight:bold;font-size:90%;color:white;padding-top:3px;padding-bottom:3px;padding-left:10px;padding-right:10px;white-space:nowrap;">Create function</span> and configure:</p></li>
</ol><ul>
<li>Select <strong>Author from scratch</strong>
</li>
<li>
<strong>Name:</strong> <input readonly="" class="copyable-inline-input" size="11" type="text" value="Check-Stock">
</li>
<li>
<strong>Runtime:</strong> <em>Python 3.8</em>
</li>
<li>Expand <i class="fas fa-caret-right"></i> <strong>Change default execution role</strong>.</li>
<li>
<strong>Execution Role:</strong> <em>Use an existing role</em>
</li>
<li>
<strong>Existing role:</strong> <em>Lambda-Check-Stock-Role</em>
</li>
<li>Click <span style="background-color:#ec7211;font-weight:bold;font-size:90%;color:white;padding-top:3px;padding-bottom:3px;padding-left:10px;padding-right:10px;white-space:nowrap;">Create function</span>
</li>
</ul>
<p>This role has been configured with permissions to send a notification to Amazon SNS.</p>
<ol start="44">
<li><p>Click the <strong>Code</strong> tab.</p></li>
<li><p>Double-click <strong>lambda_function.py</strong>.</p></li>
<li><p>Delete all of the code that appears in the code editor.</p></li>
<li><p>Copy and paste the following code into the <strong>Function code</strong> editor:</p></li>
</ol><pre class="highlight python"><code><span class="c"># Stock Check Lambda function</span>
<span class="c">#</span>
<span class="c"># This function is triggered when values are inserted into the Inventory DynamoDB table.</span>
<span class="c"># Inventory counts are checked, and if an item is out of stock, a notification is sent to an SNS topic.</span>

<span class="kn">import</span> <span class="nn">json</span><span class="p">,</span> <span class="n">boto3</span>

<span class="c"># This handler is run every time the Lambda function is triggered</span>
<span class="k">def</span> <span class="nf">lambda_handler</span><span class="p">(</span><span class="n">event</span><span class="p">,</span> <span class="n">context</span><span class="p">):</span>

  <span class="c"># Show the incoming event in the debug log</span>
  <span class="k">print</span><span class="p">(</span><span class="s">"Event received by Lambda function: "</span> <span class="o">+</span> <span class="n">json</span><span class="o">.</span><span class="n">dumps</span><span class="p">(</span><span class="n">event</span><span class="p">,</span> <span class="n">indent</span><span class="o">=</span><span class="mi">2</span><span class="p">))</span>

  <span class="c"># For each inventory item added, check if the count is zero</span>
  <span class="k">for</span> <span class="n">record</span> <span class="ow">in</span> <span class="n">event</span><span class="p">[</span><span class="s">'Records'</span><span class="p">]:</span>
    <span class="n">newImage</span> <span class="o">=</span> <span class="n">record</span><span class="p">[</span><span class="s">'dynamodb'</span><span class="p">]</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s">'NewImage'</span><span class="p">,</span> <span class="bp">None</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">newImage</span><span class="p">:</span>

      <span class="n">count</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">record</span><span class="p">[</span><span class="s">'dynamodb'</span><span class="p">][</span><span class="s">'NewImage'</span><span class="p">][</span><span class="s">'Count'</span><span class="p">][</span><span class="s">'N'</span><span class="p">])</span>

      <span class="k">if</span> <span class="n">count</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
        <span class="n">store</span> <span class="o">=</span> <span class="n">record</span><span class="p">[</span><span class="s">'dynamodb'</span><span class="p">][</span><span class="s">'NewImage'</span><span class="p">][</span><span class="s">'Store'</span><span class="p">][</span><span class="s">'S'</span><span class="p">]</span>
        <span class="n">item</span>  <span class="o">=</span> <span class="n">record</span><span class="p">[</span><span class="s">'dynamodb'</span><span class="p">][</span><span class="s">'NewImage'</span><span class="p">][</span><span class="s">'Item'</span><span class="p">][</span><span class="s">'S'</span><span class="p">]</span>

        <span class="c"># Construct message to be sent</span>
        <span class="n">message</span> <span class="o">=</span> <span class="n">store</span> <span class="o">+</span> <span class="s">' is out of stock of '</span> <span class="o">+</span> <span class="n">item</span>
        <span class="k">print</span><span class="p">(</span><span class="n">message</span><span class="p">)</span>

        <span class="c"># Connect to SNS</span>
        <span class="n">sns</span> <span class="o">=</span> <span class="n">boto3</span><span class="o">.</span><span class="n">client</span><span class="p">(</span><span class="s">'sns'</span><span class="p">)</span>
        <span class="n">alertTopic</span> <span class="o">=</span> <span class="s">'NoStock'</span>
        <span class="n">snsTopicArn</span> <span class="o">=</span> <span class="p">[</span><span class="n">t</span><span class="p">[</span><span class="s">'TopicArn'</span><span class="p">]</span> <span class="k">for</span> <span class="n">t</span> <span class="ow">in</span> <span class="n">sns</span><span class="o">.</span><span class="n">list_topics</span><span class="p">()[</span><span class="s">'Topics'</span><span class="p">]</span>
                        <span class="k">if</span> <span class="n">t</span><span class="p">[</span><span class="s">'TopicArn'</span><span class="p">]</span><span class="o">.</span><span class="n">lower</span><span class="p">()</span><span class="o">.</span><span class="n">endswith</span><span class="p">(</span><span class="s">':'</span> <span class="o">+</span> <span class="n">alertTopic</span><span class="o">.</span><span class="n">lower</span><span class="p">())][</span><span class="mi">0</span><span class="p">]</span>

        <span class="c"># Send message to SNS</span>
        <span class="n">sns</span><span class="o">.</span><span class="n">publish</span><span class="p">(</span>
          <span class="n">TopicArn</span><span class="o">=</span><span class="n">snsTopicArn</span><span class="p">,</span>
          <span class="n">Message</span><span class="o">=</span><span class="n">message</span><span class="p">,</span>
          <span class="n">Subject</span><span class="o">=</span><span class="s">'Inventory Alert!'</span><span class="p">,</span>
          <span class="n">MessageStructure</span><span class="o">=</span><span class="s">'raw'</span>
        <span class="p">)</span>

  <span class="c"># Finished!</span>
  <span class="k">return</span> <span class="s">'Successfully processed {} records.'</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">event</span><span class="p">[</span><span class="s">'Records'</span><span class="p">]))</span>
</code><button class="button button--text button--small copy-button js-copy-button-2"><ql-icon>content_copy</ql-icon></button></pre>
<p>Examine the code. It is performing the following steps:</p>
<ul>
<li>Loop through the incoming records.</li>
<li>If the inventory count is zero, send a message to the SNS topic.</li>
</ul><ol start="48">
<li><p>On line 31 edit the value of the <em>**alertTopic</em>* variable to match the SNS topic you created in the task named <strong>Configuring notifications</strong>.</p></li>
<li><p>Click <span style="background-color:#ec7211;font-weight:bold;font-size:90%;color:white;padding-top:3px;padding-bottom:3px;padding-left:10px;padding-right:10px;white-space:nowrap;">Deploy</span></p></li>
</ol>
<p>Now, configure the function to be triggered whenever data is added to the <em>Inventory</em> table in DynamoDB.</p>
<ol start="50">
<li><p>Scroll up to the top of the page.</p></li>
<li><p>Click <span style="background-color:white;font-weight:bold;font-size:90%;color:#545b64;border-color:#545b64;border-radius:2px;border-width:1px;border-style:solid;padding-top:3px;padding-bottom:3px;padding-left:10px;padding-right:10px;"><i class="fas fa-plus"></i> Add trigger</span> and configure:</p></li>
</ol><ul>
<li>
<strong>Select a trigger:</strong> <em>DynamoDB</em>
</li>
<li>
<strong>DynamoDB Table:</strong> <em>Inventory</em>
</li>
<li>Click <span style="background-color:#ec7211;font-weight:bold;font-size:90%;color:white;padding-top:3px;padding-bottom:3px;padding-left:10px;padding-right:10px;white-space:nowrap;">Add</span>
</li>
</ul>
<p>You are now ready to test the system.</p>

<h2 id="step8">Task 6: Testing the system</h2>

<p>You will now upload an inventory to Amazon S3, which will trigger the original <em>Load-Inventory</em> function. This function will load data into DynamoDB, which will then trigger the new <em>Check-Stock</em> Lambda function. If the Lambda function detects an item with zero inventory, it will send a message to Amazon SNS, which will notify you via SMS or email.</p>
<ol start="52">
<li><p>On the <span style="background-color:#232f3e;font-weight:bold;font-size:90%;color:white;padding-top:3px;padding-bottom:3px;padding-left:10px;padding-right:10px;">Services <i class="fas fa-angle-down"></i></span> menu, click <strong>S3</strong>.</p></li>
<li><p>Click on the name of your <em>inventory-xxxx</em> bucket.</p></li>
<li><p>Upload a different inventory file.</p></li>
<li><p>Return to the Inventory Dashboard web browser tab, and refresh the page.</p></li>
</ol>
<p>You should now be able to use the <strong>Store</strong> dropdown menu to view inventory from both stores.</p>

<p>You should receive a notification via SMS or email telling you that the store is out of stock of an item (every inventory file has one item out of stock).</p>

<p><i class="fas fa-comment"></i> <strong>Note</strong> If you do not receive a notification, please wait a few minutes and try uploading a different inventory file. The DynamoDB trigger may take a few minutes to enable. It is possible that some phones might not receive the message due to anti-spam settings. If so, add an email subscription to the Amazon SNS topic, which will send you a confirmation email. Then, open the email and click the <strong>Confirm subscription</strong> link. You can then upload another file to test the system.</p>
<ol start="56">
<li>Try uploading multiple inventory files at the same time. What do you think will happen?</li>
</ol>
<h2 id="step9">Conclusion</h2>

<p>Congratulations! You now have successfully:</p>
<ul>
<li>Created a Lambda function</li>
<li>Triggered a Lambda function from Amazon S3 and DynamoDB</li>
<li>Configured Amazon SNS to send notifications</li>
</ul>
<h2 id="step10">End Lab</h2>

<p>Follow these steps to close the console, end your lab, and evaluate the experience.</p>
<ol start="57">
<li><p>Return to the AWS Management Console.</p></li>
<li><p>On the navigation bar, choose <strong>awsstudent@&lt;AccountNumber&gt;</strong>, and then choose <strong>Sign Out</strong>.</p></li>
<li><p>Choose <span style="background-color:#D93025;font-family:Google Sans;font-weight:bold;font-size:90%;color:white;border-color:#D93025;border-radius:4px;border-width:2px;border-style:solid;padding-top:5px;padding-bottom:5px;padding-left:10px;padding-right:10px;">End Lab</span></p></li>
<li><p>Choose <span style="background-color:#DEDEDE;font-family:Google Sans;font-weight:bold;font-size:90%;color:#444;border-width:1px;border-style:solid;border-color:#444;padding-top:3px;padding-bottom:3px;padding-left:10px;padding-right:10px;">OK</span></p></li>
<li><p>(Optional):</p></li>
</ol><ul>
<li>Select the applicable number of stars <i class="far fa-star"></i>
</li>
<li>Type a comment</li>
<li>
<p>Choose <strong>Submit</strong></p>
<ul>
<li>1 star = Very dissatisfied</li>
<li>2 stars = Dissatisfied</li>
<li>3 stars = Neutral</li>
<li>4 stars = Satisfied</li>
<li>5 stars = Very satisfied</li>
</ul>
</li>
</ul>
<p>You may close the window if you don't want to provide feedback.</p>

<h2 id="step11">Additional Resources</h2>

<p><a id="sms-steps" target="_blank"></a></p>

<h3>SMS Subscription</h3>
<ul>
<li>
<p>To subscribe a mobile text messaging (SMS) to an Amazon SNS topic:</p>
<ul>
<li>
<strong>Protocol:</strong> <em>SMS</em>
</li>
<li>
<strong>Endpoint:</strong> Enter your cell phone number in international format (for example, +14155550100 or +917515550199)</li>
<li>Click <span style="background-color:#ec7211;font-weight:bold;font-size:90%;color:white;padding-top:3px;padding-bottom:3px;padding-left:10px;padding-right:10px;white-space:nowrap;">Create subscription</span>
</li>
</ul>
</li>
</ul>
<p><i class="fas fa-comment"></i> <strong>Note</strong> Incase if you see an option to add phone number using <strong>Sandbox destination phone numbers</strong> as below, then follow the steps below:</p>

<p><img src="./index_files/sandbox-destination-phone-numbers.png" alt="Workflow"></p>
<ul>
<li>Click on <span style="background-color:white;font-weight:bold;font-size:90%;color:#545b64;border-color:#545b64;border-radius:2px;border-width:1px;border-style:solid;padding-top:3px;padding-bottom:3px;padding-left:10px;padding-right:10px;">Add phone number</span>
</li>
<li>Use dropdown arrow to select the country. You will see an option to search the country you want to select here.</li>
<li>Enter the phone number in international format (for example, +14155550100 or +917515550199).</li>
<li>For <strong>Verification message language</strong>, select the desired language in which you want to receive a message (for example, English (United States) or German (Germany))</li>
<li>Click <span style="background-color:#ec7211;font-weight:bold;font-size:90%;color:white;padding-top:3px;padding-bottom:3px;padding-left:10px;padding-right:10px;white-space:nowrap;">Add phone number</span>
</li>
<li>Check your phone and enter the 6 digit verification code.</li>
<li>Click <span style="background-color:#ec7211;font-weight:bold;font-size:90%;color:white;padding-top:3px;padding-bottom:3px;padding-left:10px;padding-right:10px;white-space:nowrap;">Verify phone number</span>
</li>
<li>For Endpoint, select the phone number you just added.</li>
<li>Click <span style="background-color:#ec7211;font-weight:bold;font-size:90%;color:white;padding-top:3px;padding-bottom:3px;padding-left:10px;padding-right:10px;white-space:nowrap;">Create subscription</span>
</li>
</ul>
<p><i class="fas fa-comment"></i> <strong>Note</strong> If the notification is not received via SMS, you can instead subscribe via email, providing an email address that you can access from the classroom. After creating an email subscription, you will receive a confirmation email. Open the email and click the <strong>Confirm subscription</strong> link.</p>

<p>Now that the topic and subscription are set up, any message sent to the SNS topic will be forwarded to you via SMS.</p>

<p>For more information about AWS Training and Certification, see <a href="https://aws.amazon.com/training/" target="_blank"><em>https://aws.amazon.com/training/</em></a>.</p>

<p><em>Your feedback is welcome and appreciated.</em></p>

<p>If you would like to share any feedback, suggestions, or corrections, please provide the details in our <a href="https://support.aws.amazon.com/#/contacts/aws-training" target="_blank"><em>AWS Training and Certification Contact Form</em></a>.</p>

</div>
</div>


<div class="lab-content__end-lab-button js-end-lab-button-container hidden">
<ql-lab-control-button class="js-end-lab-button" running=""></ql-lab-control-button>
</div>
<!-- / TODO: Move recommendations into the end lab modal -->
</ql-drawer-content>
<ql-drawer end="" id="outline-drawer" open="" slot="drawer" width="320" aria-hidden="false" role="region" mode="side" style="width: 320px; visibility: visible;">
<ul class="lab-content__outline js-lab-content-outline">
<li><a href="https://aws.qwiklabs.com/classrooms/53328/labs/299515#step1">Lab overview</a></li><li><a href="https://aws.qwiklabs.com/classrooms/53328/labs/299515#step2">Start Lab</a></li><li><a href="https://aws.qwiklabs.com/classrooms/53328/labs/299515#step3">Task 1: Creating a Lambda function to load data</a></li><li><a href="https://aws.qwiklabs.com/classrooms/53328/labs/299515#step4">Task 2: Configuring an Amazon S3 event</a></li><li><a href="https://aws.qwiklabs.com/classrooms/53328/labs/299515#step5">Task 3: Testing the loading process</a></li><li><a href="https://aws.qwiklabs.com/classrooms/53328/labs/299515#step6">Task 4: Configuring notifications</a></li><li><a href="https://aws.qwiklabs.com/classrooms/53328/labs/299515#step7">Task 5: Creating a Lambda function to send notifications</a></li><li><a href="https://aws.qwiklabs.com/classrooms/53328/labs/299515#step8">Task 6: Testing the system</a></li><li><a href="https://aws.qwiklabs.com/classrooms/53328/labs/299515#step9">Conclusion</a></li><li><a href="https://aws.qwiklabs.com/classrooms/53328/labs/299515#step10">End Lab</a></li><li><a href="https://aws.qwiklabs.com/classrooms/53328/labs/299515#step11">Additional Resources</a></li>
</ul>
</ql-drawer>
</ql-drawer-container>
</ql-drawer-content>
</ql-drawer-container>



</div>
</main>


<div class="modal fade" id="lab-details-modal">
<div class="modal-container">
<div class="modal-content mdl-shadow--24dp">
<div class="modal-body">
<p class="l-mbm">
In this lab, you will use AWS managed services to implement a serverless architecture.
</p>
<p class="small-label l-mbs">
<strong>
Duration:
</strong>
2m setup
·
180m access
·
180m completion
</p>
<p class="small-label l-mbs">
<strong>AWS Region:</strong>
[us-east-1] <strong>US East (N. Virginia)</strong>
</p>
<p class="small-label l-mbs">

</p>
<p class="small-label">
<strong>
Permalink:
</strong>
<a href="https://aws.qwiklabs.com/catalog_lab/10387">https://aws.qwiklabs.com/catalog_lab/10387</a>
</p>
</div>
<div class="modal-actions">
<a class="button button--text" data-dismiss="modal">
Got It
</a>
</div>


</div>
</div>
<iframe class="l-ie-iframe-fix" src="./index_files/saved_resource(2).html"></iframe>
</div>
<ql-dialog headline="How satisfied are you with this lab?&lt;span aria-hidden=&quot;true&quot;&gt;*&lt;/span&gt;" id="lab-review-dialog" tabindex="-1" aria-hidden="true">
<form class="simple_form js-lab-review-form" id="new_lab_review" action="https://aws.qwiklabs.com/lab_reviews" accept-charset="UTF-8" data-remote="true" method="post"><input name="utf8" type="hidden" value="✓"><div aria-labelledby="lab-review-dialog" aria-required="true" aria-valuemax="5" aria-valuemin="0" aria-valuenow="0" class="rateit js-rateit" data-rateit-max="5" data-rateit-min="0" data-rateit-resetable="false" data-rateit-step="1" data-rateit-value="0" id="lab-review-rateit" role="slider" tabindex="0"><div class="rateit-reset" style="display: none;"></div><div class="rateit-range" style="width: 80px; height: 16px;"><div class="rateit-selected" style="height: 16px; width: 0px;"></div><div class="rateit-hover" style="height:16px"></div></div></div>
<div class="l-mtm">

<div class="control-group hidden lab_review_user_id"><div class="controls"><input class="hidden" type="hidden" value="484237" name="lab_review[user_id]" id="lab_review_user_id"></div></div>
<div class="control-group hidden lab_review_classroom_id"><div class="controls"><input class="hidden" type="hidden" value="53328" name="lab_review[classroom_id]" id="lab_review_classroom_id"></div></div>
<div class="control-group hidden lab_review_lab_id"><div class="controls"><input class="hidden" type="hidden" value="10387" name="lab_review[lab_id]" id="lab_review_lab_id"></div></div>
<div class="control-group hidden lab_review_focus_id"><div class="controls"><input class="hidden" type="hidden" value="299515" name="lab_review[focus_id]" id="lab_review_focus_id"></div></div>
<div class="control-group hidden lab_review_rating"><div class="controls"><input class="hidden js-rating-input" type="hidden" name="lab_review[rating]" id="lab_review_rating"></div></div>
<div class="control-group text optional lab_review_comment"><label class="text optional control-label" for="lab_review_comment">Additional Comments</label><div class="controls"><textarea class="text optional" name="lab_review[comment]" id="lab_review_comment"></textarea></div></div>
</div>
</form><ql-button disabled="" id="submit" label="Submit" slot="action" text=""></ql-button>
</ql-dialog>

<ql-dialog headline="All done? If you end this lab, you will lose all your work. You may not be able to restart the lab if there is a quota limit. Are you sure you want to end this lab?
" icon="error_outline" id="js-lab-are-you-sure-dialog" tabindex="-1" aria-hidden="true">
<ql-button id="js-are-you-sure-button" label="Submit" slot="action" text=""></ql-button>
</ql-dialog>


<script>
  $( function() {
    ql.initMaterialInputs();
    initChosen();
    initSearch();
    initTabs();
    ql.list.init();
    ql.favoriting.init();
    ql.header.myAccount.init();
    initTooltips();
    ql.autocomplete.init();
    ql.modals.init();
    ql.toggleButtons.init();
    ql.analytics.init();
    initLabContent();
  ql.labOutline.links.init();
  initLabReviewModal();
  initLabReviewTranslations( {"star_amount_1":"1 of 5 stars","star_amount_2":"2 of 5 stars","star_amount_3":"3 of 5 stars","star_amount_4":"4 of 5 stars","star_amount_5":"5 of 5 stars"} )
  ql.labAssessment.init();
  ql.labData.init();
  initLabTranslations( {"are_you_sure":"All done? If you end this lab, you will lose all your work. You may not be able to restart the lab if there is a quota limit. Are you sure you want to end this lab?\n","in_progress":"*In Progress*","ending":"*Ending*","starting":"*Starting, please wait*","end_concurrent_labs":"Sorry, you can only run one lab at a time. To start this lab, please confirm that you want all of your existing labs to end.\n","copied":"Copied","no_resource":"Error retrieving resource.","no_support":"No Support","mac_press":"Press ⌘-C to copy","thanks_review":"Thanks for reviewing this lab.","windows_press":"Press Ctrl-C to copy","days":"days"} );
  ql.labRun.init();
  ql.chat.init();
  ql.initHeader();
  ql.navigation.init();
  ql.navPanel.init();
  ql.navigation.init();
  
  });
</script>




<iframe data-product="web_widget" title="No content" tabindex="-1" aria-hidden="true" src="./index_files/saved_resource(3).html" style="width: 0px; height: 0px; border: 0px; position: absolute; top: -9999px;"></iframe><div><iframe title="Opens a widget where you can chat to one of our agents" id="launcher" tabindex="-1" style="width: 108px; height: 50px; padding: 0px; margin: 10px 20px; position: fixed; bottom: 30px; overflow: visible; opacity: 0; border: 0px; z-index: 999998; transition-duration: 250ms; transition-timing-function: cubic-bezier(0.645, 0.045, 0.355, 1); transition-property: opacity, top, bottom; top: -9999px; visibility: hidden;" src="./index_files/saved_resource(4).html"></iframe></div></body></html>